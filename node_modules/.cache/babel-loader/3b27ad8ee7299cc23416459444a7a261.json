{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _deprecate = require('./deprecate');\n\nvar _deprecate2 = _interopRequireDefault(_deprecate);\n\nfunction startBeforeUnloadListener(getBeforeUnloadPromptMessage) {\n  function listener(event) {\n    var message = getBeforeUnloadPromptMessage();\n\n    if (typeof message === 'string') {\n      (event || window.event).returnValue = message;\n      return message;\n    }\n  }\n\n  _DOMUtils.addEventListener(window, 'beforeunload', listener);\n\n  return function () {\n    _DOMUtils.removeEventListener(window, 'beforeunload', listener);\n  };\n}\n/**\n * Returns a new createHistory function that can be used to create\n * history objects that know how to use the beforeunload event in web\n * browsers to cancel navigation.\n */\n\n\nfunction useBeforeUnload(createHistory) {\n  return function (options) {\n    var history = createHistory(options);\n    var stopBeforeUnloadListener = undefined;\n    var beforeUnloadHooks = [];\n\n    function getBeforeUnloadPromptMessage() {\n      var message = undefined;\n\n      for (var i = 0, len = beforeUnloadHooks.length; message == null && i < len; ++i) {\n        message = beforeUnloadHooks[i].call();\n      }\n\n      return message;\n    }\n\n    function listenBeforeUnload(hook) {\n      beforeUnloadHooks.push(hook);\n\n      if (beforeUnloadHooks.length === 1) {\n        if (_ExecutionEnvironment.canUseDOM) {\n          stopBeforeUnloadListener = startBeforeUnloadListener(getBeforeUnloadPromptMessage);\n        } else {\n          process.env.NODE_ENV !== 'production' ? _warning2['default'](false, 'listenBeforeUnload only works in DOM environments') : undefined;\n        }\n      }\n\n      return function () {\n        beforeUnloadHooks = beforeUnloadHooks.filter(function (item) {\n          return item !== hook;\n        });\n\n        if (beforeUnloadHooks.length === 0 && stopBeforeUnloadListener) {\n          stopBeforeUnloadListener();\n          stopBeforeUnloadListener = null;\n        }\n      };\n    } // deprecated\n\n\n    function registerBeforeUnloadHook(hook) {\n      if (_ExecutionEnvironment.canUseDOM && beforeUnloadHooks.indexOf(hook) === -1) {\n        beforeUnloadHooks.push(hook);\n        if (beforeUnloadHooks.length === 1) stopBeforeUnloadListener = startBeforeUnloadListener(getBeforeUnloadPromptMessage);\n      }\n    } // deprecated\n\n\n    function unregisterBeforeUnloadHook(hook) {\n      if (beforeUnloadHooks.length > 0) {\n        beforeUnloadHooks = beforeUnloadHooks.filter(function (item) {\n          return item !== hook;\n        });\n        if (beforeUnloadHooks.length === 0) stopBeforeUnloadListener();\n      }\n    }\n\n    return _extends({}, history, {\n      listenBeforeUnload: listenBeforeUnload,\n      registerBeforeUnloadHook: _deprecate2['default'](registerBeforeUnloadHook, 'registerBeforeUnloadHook is deprecated; use listenBeforeUnload instead'),\n      unregisterBeforeUnloadHook: _deprecate2['default'](unregisterBeforeUnloadHook, 'unregisterBeforeUnloadHook is deprecated; use the callback returned from listenBeforeUnload instead')\n    });\n  };\n}\n\nexports['default'] = useBeforeUnload;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/cclin/Documents/React/image-hosting-webapp/node_modules/history/lib/useBeforeUnload.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_interopRequireDefault","obj","_warning","require","_warning2","_ExecutionEnvironment","_DOMUtils","_deprecate","_deprecate2","startBeforeUnloadListener","getBeforeUnloadPromptMessage","listener","event","message","window","returnValue","addEventListener","removeEventListener","useBeforeUnload","createHistory","options","history","stopBeforeUnloadListener","undefined","beforeUnloadHooks","len","listenBeforeUnload","hook","push","canUseDOM","process","env","NODE_ENV","filter","item","registerBeforeUnloadHook","indexOf","unregisterBeforeUnloadHook","module"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _deprecate = require('./deprecate');\n\nvar _deprecate2 = _interopRequireDefault(_deprecate);\n\nfunction startBeforeUnloadListener(getBeforeUnloadPromptMessage) {\n  function listener(event) {\n    var message = getBeforeUnloadPromptMessage();\n\n    if (typeof message === 'string') {\n      (event || window.event).returnValue = message;\n      return message;\n    }\n  }\n\n  _DOMUtils.addEventListener(window, 'beforeunload', listener);\n\n  return function () {\n    _DOMUtils.removeEventListener(window, 'beforeunload', listener);\n  };\n}\n\n/**\n * Returns a new createHistory function that can be used to create\n * history objects that know how to use the beforeunload event in web\n * browsers to cancel navigation.\n */\nfunction useBeforeUnload(createHistory) {\n  return function (options) {\n    var history = createHistory(options);\n\n    var stopBeforeUnloadListener = undefined;\n    var beforeUnloadHooks = [];\n\n    function getBeforeUnloadPromptMessage() {\n      var message = undefined;\n\n      for (var i = 0, len = beforeUnloadHooks.length; message == null && i < len; ++i) {\n        message = beforeUnloadHooks[i].call();\n      }return message;\n    }\n\n    function listenBeforeUnload(hook) {\n      beforeUnloadHooks.push(hook);\n\n      if (beforeUnloadHooks.length === 1) {\n        if (_ExecutionEnvironment.canUseDOM) {\n          stopBeforeUnloadListener = startBeforeUnloadListener(getBeforeUnloadPromptMessage);\n        } else {\n          process.env.NODE_ENV !== 'production' ? _warning2['default'](false, 'listenBeforeUnload only works in DOM environments') : undefined;\n        }\n      }\n\n      return function () {\n        beforeUnloadHooks = beforeUnloadHooks.filter(function (item) {\n          return item !== hook;\n        });\n\n        if (beforeUnloadHooks.length === 0 && stopBeforeUnloadListener) {\n          stopBeforeUnloadListener();\n          stopBeforeUnloadListener = null;\n        }\n      };\n    }\n\n    // deprecated\n    function registerBeforeUnloadHook(hook) {\n      if (_ExecutionEnvironment.canUseDOM && beforeUnloadHooks.indexOf(hook) === -1) {\n        beforeUnloadHooks.push(hook);\n\n        if (beforeUnloadHooks.length === 1) stopBeforeUnloadListener = startBeforeUnloadListener(getBeforeUnloadPromptMessage);\n      }\n    }\n\n    // deprecated\n    function unregisterBeforeUnloadHook(hook) {\n      if (beforeUnloadHooks.length > 0) {\n        beforeUnloadHooks = beforeUnloadHooks.filter(function (item) {\n          return item !== hook;\n        });\n\n        if (beforeUnloadHooks.length === 0) stopBeforeUnloadListener();\n      }\n    }\n\n    return _extends({}, history, {\n      listenBeforeUnload: listenBeforeUnload,\n\n      registerBeforeUnloadHook: _deprecate2['default'](registerBeforeUnloadHook, 'registerBeforeUnloadHook is deprecated; use listenBeforeUnload instead'),\n      unregisterBeforeUnloadHook: _deprecate2['default'](unregisterBeforeUnloadHook, 'unregisterBeforeUnloadHook is deprecated; use the callback returned from listenBeforeUnload instead')\n    });\n  };\n}\n\nexports['default'] = useBeforeUnload;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}